function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 15-Jul-2019 19:33:32.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 7xQ matrix, input #1
% and returns:
%   y = 7xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6];
x1_step2.xoffset = [-0.523595000649894;-0.244315493842152;-0.593385041562098;-1.3962036711135;-1.48352744350811;-0.698123778730893];
x1_step2.gain = [1.90992664371544;1.94229071710547;1.68523633722175;0.424422762262554;0.440740101051222;1.4324106685331];
x1_step2.ymin = -1;

% Layer 1
b1 = [-2.5664647204732551344;-1.2256544119282217764;2.7374350155539670659;-2.0573981030072778786;-1.0713778371649158583;1.2355466618012229674;1.1487630943122919547;-1.4836573269972450628;-1.7706227416830808696;-1.8029008577928979928;0.52827709194046013064;-0.36092458635074109452;-1.3611628427156643451;0.34945355422580698379;-1.0241197176944023539;0.019680634215599950021;0.0084040660195378660835;-0.37762001173410036925;-0.61278112191433364853;0.57481801365691631567;0.55516290668062473479;-0.2687083709843027246;-0.00037059913804845688243;-0.013940747241130918913;1.4716833192732807767;1.0189866950740338325;0.82485463222735078137;-1.3575300175458029361;1.0393193827150117858;-0.93128643132117194803;0.29788685269687492641;-1.8065945245238854699;-1.8990764960259287619;-0.45976941047914254845;-1.7658522331590311705;1.5450083131616059173;1.9214409531489953231;-2.3688673580665353668;1.6133754209418087466;-2.2852379854211872789];
IW1_1 = [-0.022455702186111842211 0.52721522860431735413 0.60425844576467191427 -1.7601314235002565312 0.17825794324922114575 -0.011295381601261636137;0.0046141377522421686552 -0.27576461898850490595 -0.31754832274372518652 1.4828552170923938736 -0.15676839818878823829 0.066099107946713017703;-0.0024108171570963771342 0.10565107984187306622 0.13711622127590444853 -1.5718779616793885356 -0.8405472083051076515 1.1239221799253096279;1.2506960944403193725 1.0237120947867017762 0.82394534052950452185 1.4534948695903373572 -0.56439656175535346527 -0.08066022525723733072;-0.0010939195263620542578 0.329407845927076115 0.38433392801330340527 1.2883117827050838411 -1.6077642017433433352 0.026836206762844344587;0.0030063977838625482834 0.48241134657549356035 0.55038690046152294322 2.1076527602338210876 -0.23026123002930501404 -0.019357935432994934771;-0.0023032392584275123565 0.22252922992698936921 0.26202271851090663812 -0.81987491707140047748 1.0974745733057233998 0.22633787650217040976;-0.0075866273291955218377 0.26657270820069955963 0.30515527707775641497 -0.94569278544683854637 1.2714951373315872551 -0.019758563411540169819;1.4711848910009226454 0.047151853230631764202 -0.47545503471434480414 -0.66573919921130841892 1.0388522897091772013 0.34698482931276775076;0.07148960082348060352 0.67208499754215123012 0.71607782857053225989 0.74938519161463235108 -0.98273818509599097926 -0.64813183991356870806;-0.0035369645960660117331 -0.51316214516982194827 -0.65308859479525904757 0.0057691548505958813522 -0.01056762688279517387 -0.0017350974154426881783;3.0815595826854172683e-05 -0.37613643516650879794 -0.43491442008992065027 1.6237188775237847427 -0.084075127691905324201 -0.14345545334867576548;1.1739526853134392148 0.90063011161621209233 0.27394997437935830753 -0.82360077491042482656 0.056765505817349085071 -0.0087569485301463335924;-0.0087770558281704928738 -0.73041864349596696826 -0.74105732927633372054 0.00044710474435489812014 -0.0083958443654015366825 -0.0088159918687364269979;0.76596535569080503869 -1.3006608210884385013 0.79336068085449096277 -0.56060489501564814141 -0.87528084053888077776 0.82464352182840627847;0.00042437482359734010704 -0.42138543290021318599 -0.49818385591745162344 -0.12567726137081472459 -1.3839784742477330148 -0.53670263403325235707;-0.005187633094611664511 0.33738224587739740201 0.38718423214570196755 1.4175134391015573598 -0.27326705041708210242 -0.076519689610521732237;0.007336722283726603358 0.12506415695087641504 0.12738766134633347504 -0.066660846865527423333 1.8037209378262710757 -0.84273876986520190879;0.61063964984093033195 -0.13754295494258461652 -1.1191827716462638964 0.16073772376702843978 0.54111295296451478176 -0.54568409566199427285;-0.0036338145661205419057 -0.20541218457482354753 -0.23613760323107060857 -1.0477625531800554004 -1.0604208270377901702 -0.017168566180409509936;-0.0048494503752834552945 -0.31712561704832331611 -0.36519188837504368284 1.4635982059533343413 -0.089583784696980986451 -0.0081374210381438376316;-1.3028419534380004663 -0.18581561492854073436 0.80657609954895648219 0.98244545858282672501 -0.57372917736319573034 0.45401244810699936671;0.41545913550562846295 -0.45940564230410196878 -0.6936542408443219232 -0.55331644439842087024 0.97981978476780762222 0.078989973522531092831;-0.0063302698286031586564 0.22590055747975287814 0.26081796921349492679 -0.040621373983019071208 -1.1071252332325685064 -0.047182481097844966578;0.20552284447868768291 0.21095513304787075204 -0.089360542949146762326 -0.33370419245903659711 1.0423923045190954806 1.0009677590180328099;0.0019415432717767801187 0.34895381951838250201 0.39883754966398404784 -1.1831690597928050668 -1.3245365852092616521 0.026180689676671125427;-0.00065192009028954142017 -0.3475982452095880415 -0.40405481044347552055 -1.6214637277901216006 0.0026318546548344855587 -0.042299740258146582839;-0.0024091464732784832747 0.19887407958275749031 0.23735756657448672802 -1.3978266260336487115 -0.045087996024721757604 -0.95637795633951394603;0.0008586486931239955319 0.24002570948432316866 0.27635275614609672301 -0.78709265380632520426 0.89017042967117054886 -0.1809340411995599418;0.001915411407434257883 -0.8355532736477702116 -0.75742915773905661325 -0.0033122328294048625219 0.012153141569287718646 0.0014637088396125806124;0.0016326973411645638416 0.33320117885221339771 0.3821201770465370573 0.33212448374244096794 1.267906726800287931 -0.064188836831245099646;-0.032145509245640017937 -0.50968901782066866613 -0.56043958447499708786 -1.3999770387227064017 -0.57916564710718787534 -0.41797295818295099323;-0.22139610259807016024 1.3670002847120246159 -0.70111488555675405276 1.3380047760104369914 -0.75244238048485556636 0.30493733913731746465;-0.0011586787055718635302 -0.18093279494412289887 -0.20703988481160795487 0.48018465448616187707 0.38592585907761955966 -0.0083689315672543368452;-0.92309414978237125382 1.2483004923028153677 -1.0640072589662914471 0.14028247698970147672 0.15015575136469153095 -1.1217569288882009992;0.0064038794058833567804 0.31882116062542248391 0.37785763475856926075 -0.82053530649741657221 -1.0442953830082941646 -1.6216922164087963498;-0.010037458164431538668 -0.38951986776089947417 -0.45534755678463151307 -1.8216054691365701768 -0.18395583138016496916 0.071117689179845802738;-0.28343326873288821055 0.16311394563745917896 1.7758598087183365966 1.4930549042746696919 -0.17069617383546348277 -0.23451560655588446491;0.022192105621151640704 -0.99499651560898150215 -1.1370881106856514098 -0.012102649569138554039 1.1302719603286361938 -0.25414177451079411618;-0.69874799697461442705 -0.58923280723992899066 -0.72859641623987025927 -1.5424069423960229397 0.99842424294024334497 -0.10354813804605744743];

% Layer 2
b2 = [-0.4698004359491014803;0.36270836139729595304;0.16752662516410743443;-0.37562864575476767603;-0.39247728866530873226];
LW2_1 = [-0.20898882391028414385 0.24017475080438532853 -0.015213244605792331995 0.002044072223206626869 0.084692019082245870165 -0.20331724687046059952 -0.11969574240534490428 -0.2075153411405600834 0.00046765720684682733025 -0.012769145978412596576 1.7669829892099793156 -0.206807816298067354 -0.0013223342966260133446 -0.11912050550110551972 -0.001040245304819942913 -0.035979857175506183009 -0.34049786712110713394 0.0084951354488050634384 -0.0022689069046360086854 0.16820603968850275645 -0.51351522326221321624 0.00060587471472594558921 0.0079720370109483459226 0.1784145310586505162 0.0078215805760384719825 0.17904455629898394231 -0.33795639187957554617 0.030057840542807436751 -0.11759031608276125647 -0.55325110290565304716 0.19680694995116854162 0.05219452798012782363 -0.0009638099997176808589 1.0336539428013531428 -5.4981420096921043488e-05 0.017576490198665816606 -0.11931111197152288739 -0.0021101785960339581802 0.066385804640022277878 -0.0041467475310161521634;-0.25610215276845160748 0.29714168331425050429 -0.017548121833597697672 0.0029944868438265500633 0.10328499906563286259 -0.24541147696072299067 -0.14205884305341709428 -0.25607168144348180228 -0.00071915026972046763778 -0.0182544028883079891 0.59070677891153455796 -0.25090700439723334636 -0.0016515022787661343129 0.28085588849559162128 0.00079437802193516753903 -0.042530611492083487957 -0.41434548276503779807 0.0097069537903898446551 -0.0009459693744259010462 0.20383163184307398486 -0.6210579583244423274 0.0023331169612610396132 0.0076742526573180753005 0.2171185202024005223 0.0050115859954261102877 0.2158712284781101054 -0.41262254860941244283 0.034836214061102495354 -0.14623330512005683346 -0.030448811772684540589 0.23999689325906095605 0.065217524300875975851 0.00051844152545444267127 1.2365249035173246916 -0.00036730611837321397797 0.021660032244988431521 -0.14373405920533788294 0.002681689718784761433 0.076781860045033040185 -0.0037867383031096523913;0.46944827265101396474 -0.78574571898298661843 -0.015411614677358419917 -0.0010297816728975161486 0.19739431798221498959 -0.58383275872027473596 0.23155410087019925869 0.30325747186995594129 -0.0068011882273826826731 -0.013481893612396643814 -0.014075788657881548385 0.57545219681892123553 0.0074428142493357376738 -0.067607706823610905222 0.0033081386599795852693 -0.009026874458709902363 -0.91584336314088277131 -0.00069399590264585257933 -0.0099284117943730688938 0.48709861839637025316 1.504900761051880087 0.0032204678805967125975 0.017477586828573386801 -0.020969426434977418011 0.004270037911562171197 -0.38619519757309872521 -1.0423553617950047645 -0.046498736922994748921 0.22760672298029638316 -0.079965592264892804142 0.088002191041019320328 0.16077934611577707202 0.00015600903178746304599 -1.3740301038725886151 -0.0008022355335163316916 -0.013244224740806657958 -0.42536551530767408025 -0.0013276766351267936788 0.012924834342767121606 -0.036799130814505538745;0.22438874022929466978 -0.38713191410590702679 0.025731843742337882908 -0.0051556433763112093083 -0.56384056901660062344 0.13609957414806439502 -0.56233697530382475982 -1.1277544070902956186 0.00019229862662800540599 0.07425432897027632595 0.15367792082456627201 -0.16303289766566458896 0.0036898843885267824071 0.052155785264466195117 0.0051444905266023093285 -0.22660349423378120526 0.51169535099809959622 0.13718019850399240656 0.0041260678854374505456 1.161761045971640316 -0.50966227140266395779 -0.0044967035636946789401 -0.037115121320915003822 -1.3371560082823010784 -0.018643811262320737765 -0.8776133142254404218 -0.075897340531544080222 -0.013273641487914407747 -1.0370039455572621634 -0.01627135649052995417 1.169822695185409378 0.10369387079129419038 -0.00047093011992084483951 -1.6324055058192346035 -0.0031103581699882323908 -0.0076937486755127666369 -0.29894230499201485118 0.0027301646180731132911 -0.088679297413338714628 0.029378659543986274105;-0.43927076078639826218 -0.18108595559614293347 0.42247840663599578459 -0.039350825148370412176 0.033594238501114252748 0.066899921548317517472 -1.0395830773834702221 0.12030966657905091399 -0.013432366007781575135 0.62785156849257794942 -0.065983566190739556534 -0.9573535474467969042 0.0039455461460492641246 0.17007907327796648045 -0.018414288119007190397 -0.67782524022855694668 0.97174308556936095371 -0.70699596295090982867 0.045999543273218153339 0.2397967065972917422 0.14406499252201379613 0.0029121990376008329016 0.039289070242099578822 -0.63309250539317452056 -0.12682839443013221858 -0.096880923971397636674 -0.39439584089276569223 0.011292965074143672399 1.3170755889629954805 0.12805617258752372001 -0.36311924419408830866 0.56442299794935624213 -0.01022137519263257785 0.56163753345824263263 0.015717796178642062105 0.074482232373482892829 0.3745061605926589543 -0.012479868580101367848 0.32036531329641831922 -0.0025871597692692176705];

% Output 1
y1_step2.ymin = -1;
y1_step2.gain = [2.63231620553235;3.2008844993576;7.73968245184249;16.4081197228869;42.0237515307898];
y1_step2.xoffset = [0.0357007535604889;-0.0671612383155339;-0.129499895967178;-0.0621919665815338;-0.0237434310701596];
y1_step1.xrows = 7;
y1_step1.keep = [2 3 4 5 6];
y1_step1.remove = [1 7];
y1_step1.constants = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step2);
y1 = removeconstantrows_reverse(y1,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end

% Remove Constants Output Reverse-Processing Function
function x = removeconstantrows_reverse(y,settings)
Q = size(y,2);
x = nan(settings.xrows,Q,'like',y);
x(settings.keep,:) = y;
x(settings.remove,:) = repmat(settings.constants,1,Q);
end
