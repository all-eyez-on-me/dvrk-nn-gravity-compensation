function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 16-Jul-2019 12:14:52.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 7xQ matrix, input #1
% and returns:
%   y = 7xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6];
x1_step2.xoffset = [-0.523594529741398;-0.244339001506794;-0.593386132816069;-1.39626178789299;-1.48349484149406;-0.698122648238741];
x1_step2.gain = [1.90990331445602;1.94229593724023;1.68525909932706;0.424414022807787;0.440740212093768;1.43240808442844];
x1_step2.ymin = -1;

% Layer 1
b1 = [2.5877093997319176033;-2.5639647128746365645;2.0034003814672618482;-2.2005470432102147704;-1.9520595779042586582;1.2590441398862375344;-1.0008474042042652119;-2.3379011052933029724;-1.6442001839418161069;-2.3105906999144250058;-1.1490433837994182831;-2.0747000601491301097;-0.21106664254160867333;0.91206068267035866892;-0.36907759740004847382;-0.70589806028257962023;0.63743639010966657299;-0.21782131404390547846;0.54143225250551940686;-0.45162414239375620051;0.13677983119417766456;0.28579025203595731508;-0.017543825298209973079;0.43564671394818987871;0.35935658716061158469;-1.865531582800743049;0.910877879585725303;-0.50186474326188024175;-1.2049226088995608208;-0.38320364395208972308;-2.1713414550646183976;-1.5022016961227495635;-1.7365622827990445654;1.5414586965113721284;-1.5989815969030369835;1.6636298601792516294;1.4412940665974351973;2.2199781320668341422;1.5298555887878024784;-1.3841377388254005876];
IW1_1 = [-0.00024733114506291306459 -0.56606580431536701603 -0.65105882443195572939 -1.3327538558057629992 1.1051059280247748084 0.0011310893220544951041;0.0011822998457276488737 0.77728624947271551804 0.89420449699954840383 1.1260242615785509557 -1.2126965927761721442 0.0091039319789777192055;-0.90962912984938504302 -1.0359060306838230314 1.0603541175672945851 0.62038620841937197614 -0.9242734430994353767 -0.14317802816081631745;-0.00026713972285056868626 0.13779272082513810416 0.16070027582228951779 0.20062085603826773639 -2.0429389527080039635 0.049750205242424218322;-0.00034402578553717727116 0.026538862324229507694 0.029738445433552630065 -0.93083882436751630429 -1.1886005916698674234 -0.054522115054644541832;-1.348433095754855815 0.013822861184241525337 0.019898933494290508422 0.00043423944163429960665 -0.0014862700937535793747 -0.0011381429352563710196;0.00012855838511689093081 -0.30855882485657704084 -0.35893968640694984273 1.0843987726565977869 1.0902180540025472322 0.014115010896958914144;-0.0012351141434407213703 -0.4533048033613023553 -0.53212169634504491444 -1.6783463630979287284 0.027479101325491084307 -0.0030561112809246583459;-0.00025321140192159630449 0.35615394889218471297 0.40976002264379729478 0.016099653955506002673 -1.2483897954840530442 0.008299532999277391826;-0.004528945400538725817 -0.54148282625553367797 -0.62175005903766067394 -1.5898825908219980096 -0.8569689120087131684 -0.67759571989319644647;-0.00065916800637894285356 0.30770903302960689318 0.35336348222545954645 0.033864520927940809647 1.0217689818554984704 0.0086268505979407560796;6.4097344775322908305e-05 1.1180439420909489279 -0.013933401096430301017 0.0020255151559075233042 0.0010428676247886746291 0.0002564396393813353275;0.002719318492615008763 -0.33010628957459609012 -0.36905555355072566792 -1.3964346978218273865 0.057906660082043502624 0.14656047124263998915;-0.41412459427697606573 -0.95165980221543333695 -0.81832891575351196511 0.054896787067433922003 0.61859094529421743136 0.94080486356193782083;-0.0012566350183660928048 -0.016415562429169455044 -0.019079921049588555171 -0.24610436181776434994 1.3232723766796290477 0.72716245687818303889;0.0004345849766244129172 0.17958336629297425024 0.20625009857518070144 1.0949103846852661359 1.1545133206097601963 -0.00080869153797615521417;3.2211400768386921965e-05 0.19478711135029949664 0.22436669218809257575 -1.1754488664823110611 0.070782599830634798654 -0.061835875559563248383;0.00037510532675721051672 0.21063314500376389971 0.22742223686258375426 -0.45343046184346469385 -0.62281305844074130729 0.50893336438924730025;0.00019617777492296009927 0.86632982854194695577 0.9988664958979927011 0.9231048902375592613 1.2846282899270240474 0.025819794357833051462;-0.00041306430682801610708 -0.30722023788463947991 -0.34408895390403165804 0.6998098956502414314 -0.22181128851103740218 0.27189976505951735097;0.00035515569175053891392 -0.25220175618482121305 -0.28901453053663411774 1.0698279516221198548 -1.1319714462853489589 -0.0026746861450864262838;-0.00025213933557970277192 0.28426223431652980489 0.31649308657840224956 -0.51045078053910253324 0.36814563935286692686 0.14207418509642269489;0.00059232772460777126898 0.23877957249306402954 0.27701657782172772748 -0.97803320372515889503 0.09280733617930678192 0.047246070584010986526;6.9809794606911894106e-05 -0.32464702732649597383 -0.37354525632088902976 -1.2427178731245251964 0.12968527077558097971 -0.088862456136941991858;0.00083812039893297707142 -0.095710995868934084507 -0.11211453533942350447 0.031379659117670787027 -1.1816817431216088963 0.77128417345250654957;0.01863658951514342299 -0.57614145344438827401 -0.62798058663513567357 0.63069366557213635271 0.43449476272584158787 -0.72586419517833777881;0.97881069322637903607 -0.018350472031118433835 -0.024003048322949454424 -0.00070026981754755255119 0.001084290111025096575 0.00027663882714960960543;0.00011868835377354906976 0.12396474077335992159 0.14178040938168554042 0.9000653463122256781 0.81015600052224856498 0.012401774160097005922;-0.0057157061134761773247 0.4442886292290008643 0.51484162851954407003 1.1321738587870462389 1.149011377392884059 -0.93913320697273650062;-6.4347422394220145174e-05 -0.20268920392111450246 -0.23234177723117521719 -0.98323760749254185409 1.0814238127650879218 0.011427587196034960301;-0.0014091323696571839922 0.21215165619911105499 0.23562117754392411517 -1.4171485724319170529 -0.087582364936597406624 -0.064774079100773762629;-0.0026236988874651936098 -0.023666485682534540297 0.6137948437474287644 0.0018929650966989916214 0.023165783615574066234 -0.0053454837241339349385;-0.088823306777351132557 -0.78084295245316159839 1.195075230619491613 0.16130087693455932851 1.2988371702623582316 -0.19388766081253788753;-0.00066418888841084989562 1.0924688134237385828 0.0099852279751844481154 0.00074646203101166408531 0.00029381936843117111057 -4.0431926494739590743e-05;0.008796151104110298824 0.9296415415296688245 0.97672189160548394948 -0.65082704918219136392 0.10604472935988733251 1.2840399171917109555;1.2894179321916585668 -0.43290186726990848021 -0.99150818239522398034 0.26269147450757684981 0.79370376824314559094 1.3036305667123344598;-0.0061857081719770695694 0.94400252763142344925 1.0723309972806600587 0.15300297568371901136 -0.60588226022073521371 0.10453010883462279801;0.0024401111890753422046 -0.27190894233487006293 -0.31037611789746594182 -0.11761403045651995514 2.611632810079395739 -0.18035734654574683833;-0.00049555666599485363646 -0.24966044865602354808 -0.28978690327708384045 -1.3518084170116826392 0.11001812306006161779 0.0257060826645314211;-0.00125344460045919673 -0.20324480271294279032 -0.22813086569997800823 -0.026771076721421756955 1.0970881629729747342 -0.041648374737542417923];

% Layer 2
b2 = [0.16654356733014205605;-0.17624408264517754663;0.60169383920612151684;0.55845858143574467203;-0.32195664985238026112;-0.45773640204906773654];
LW2_1 = [-0.22834429641043879622 -0.21795290308047529648 0.0014765665826866956716 0.0012782732687321920074 -0.023116547810795973206 -0.99247935465786951692 0.0080412140992103479237 0.006528900246480182426 0.11389770415066202691 0.0030313179871287636649 0.039323278784588897028 0.0075707366310563302403 0.007940107648516839256 0.00040525556409256804783 -0.00072708720092567189278 0.0079038743925205767749 0.024609197585234048045 0.0063630834974675734919 0.008422558427570682113 0.0019668254238613971062 0.010403412936400796215 0.023535622111808377627 -0.024099064654066623681 -0.0085465127797625557726 -0.0064306912583275760084 0.0077655912969099355134 0.8730314081377970048 -0.012948377798909609104 0.00070579725329233348324 0.0030625839672241308813 0.021545152657814290592 0.032517131533315618563 -0.0015529304181569043939 -0.00070694033084210097968 -0.0026868916503685704757 0.0012690814093369794883 -0.011559242150279827599 0.029122141537052979171 0.010803668669400917288 -0.058250750987197362496;1.0356130081041017288 0.63835578382364555061 -0.00078197156911462002531 0.25907795340454270461 1.1626362702491086498 -0.00079823492907602410992 -0.3226363418152922713 -0.39802747553222339594 -1.2750796921292661956 0.021373358448424490535 -1.1130195336779198367 0.95362242159727861335 0.19225245056208772887 0.00799303954324763824 -0.0025762868632487156799 -0.3607607975331632022 -0.74573837333224579638 -0.13901237240408534368 0.020716260482778865726 0.23889203883580931165 -0.41478073876368853901 -0.48739331090479270925 1.1678698669500957585 -0.61958736719658757952 -0.02247071780964362761 0.084679309573193278782 -0.00063527109670173404626 -0.041193402418592595104 -0.023536083614042455081 0.43402537266152035889 -0.87259664079445053986 -0.053452619736588290189 -0.001949199249303619182 1.0898777881083983043 -0.022770293655603447008 0.001914481132627060371 0.18673732434621140297 0.0037385950854494131093 -0.97679673912589470852 1.1107866278144520322;1.3509068331669056295 0.83213257465049517148 -0.00088009392986913858887 0.32856439495506034598 1.5142198061134846121 -0.0012189024954120815901 -0.42650585029549481497 -0.5400409752658283935 -1.6394897175388851718 0.028932742070944764828 -1.4389295402098771781 -0.015150079714448804261 0.24138198944222585829 0.010000311023277566949 -0.0046438582932816080406 -0.44861217912689577147 -0.98077346325811387562 -0.17615989465533471448 0.031242774599286468606 0.29983020661402265405 -0.54268223259497005984 -0.61733644587177105567 1.5267437430402859277 -0.81163653303834715214 -0.02977457555843683254 0.10869292008273467864 -0.0010279392209198846657 -0.084880242158988192247 -0.031024343774989460859 0.56288009287547635662 -1.1209968835435204504 0.91598087871379607616 -0.0099301438257741615062 -0.014866856649774946864 -0.029095753837639192624 0.0027096254830305537172 0.24057368758970001932 0.0046790882994733294653 -1.2887564602429453231 1.4393008397774393892;0.5877177861627487232 0.35600017764803532083 -0.00093291320253614232107 0.27180380636059986443 0.2974315727800166953 -0.0016862926072952072205 0.73298095559611731176 -0.69198474262295772697 -1.1489821810706848382 0.027132432550754700257 0.30243302294930740626 -0.019372869889611052385 0.35319240604236595837 0.008835899664270906867 -0.011340687099389174311 0.1116507183767313921 2.650675846942277758 0.078502008974176751277 0.15277068545496083618 0.074554935692907539635 0.86402038937240988048 0.43611359928655135665 -2.2168890285252160766 -1.0700975308970914757 -0.0066758549043259823169 -0.040140077848784538883 -0.0013341006377770023902 -1.4199778075110685016 -0.033437914758859030306 0.98181407848043822373 0.99133319035950717701 -0.0084447641886641264253 0.0011830369132381282887 -0.0056947577514122440026 0.020318576427472551799 0.0040829112122483229158 -0.086963827389841902304 -0.040435165232386424683 -2.1061803011345525682 -0.13563808737637267354;-0.75401110616434374734 1.2857957956120942278 -0.0016404346677482541193 -1.9957277330762874801 0.16665226046050529707 -0.0062918729679370738114 2.437091066845602505 0.9440791311002723063 -0.57081863190175907707 0.083931263669641112402 0.22946672623112096545 -0.0035283936557585901181 0.014991734088917107667 0.027634725740794684884 0.31049602214871147021 -0.62957320326518007025 0.68142213656265371302 -0.017542800171360180272 0.41066523391969766976 0.50816821969163528117 -1.9738815605427872946 -0.98439751671946251754 0.047898167287426865468 -0.34825684661619216165 -0.25020080644160658245 0.17371397102368948961 0.0028852735710435473485 -2.6227137978404808649 -0.023765453028086462595 -2.1051173778684200144 -1.5500130061760866163 -0.13182593258222150001 0.0077786362162271692131 -0.01310057920683785869 -0.036558204909637688484 0.0077989008832838272595 0.6398105410495658063 -0.66886896861015532334 0.44270083390653297561 0.45418757396253295333;-0.14130631688465772333 -0.22421791962471232518 -0.0093622862230736160483 1.0011011124738873335 -0.34957177255352095413 0.0099815177916183737972 0.068104625375689606392 0.032203695533998544231 0.16572744305013609178 0.62296324595479379838 -0.61097962728643406827 -0.035098536809842643958 -0.52589953671610134567 -0.039215342112485750137 1.098608314482942605 -0.14244201213110527227 1.7357880501859623834 -1.1491569194332000858 0.016459575796448813745 -0.24888274344276475891 -0.064377019538153321121 -1.2458637205780191959 1.1227530838272914426 -1.2553875138956791524 1.3565252231698174956 0.36004233110510219795 0.0008251121562021432581 -0.065176289290122646491 0.41813092292312226128 -0.20387189576348008213 -0.48917821860386428989 -0.20106203952076368013 0.011378732031431616767 0.012840186677298640744 -0.14357872971928586914 -0.010907819049838200429 0.14171002282096398228 0.58408989232116970136 0.40680707292107098905 0.49678061987095489815];

% Output 1
y1_step2.ymin = -1;
y1_step2.gain = [23.429734128551;2.29953403790336;3.00237515724589;4.50992875128021;12.2462662825556;22.972115263507];
y1_step2.xoffset = [-0.0132777201801522;0.0420891992589234;-0.101858929084955;-0.205339927614517;-0.0866198078406076;-0.0419520999847873];
y1_step1.xrows = 7;
y1_step1.keep = [1 2 3 4 5 6];
y1_step1.remove = 7;
y1_step1.constants = 0;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step2);
y1 = removeconstantrows_reverse(y1,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end

% Remove Constants Output Reverse-Processing Function
function x = removeconstantrows_reverse(y,settings)
Q = size(y,2);
x = nan(settings.xrows,Q,'like',y);
x(settings.keep,:) = y;
x(settings.remove,:) = repmat(settings.constants,1,Q);
end
