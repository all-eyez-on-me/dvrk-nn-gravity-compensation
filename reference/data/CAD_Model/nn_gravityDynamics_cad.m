function [y1] = nn_gravityDynamics(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 16-Jul-2019 11:55:17.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 7xQ matrix, input #1
% and returns:
%   y = 7xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6];
x1_step2.xoffset = [-0.523595000649894;-0.244315493842152;-0.593385041562098;-1.3962036711135;-1.48352744350811;-0.698123778730893];
x1_step2.gain = [1.90992664371544;1.94229071710547;1.68523633722175;0.424422762262554;0.440740101051222;1.4324106685331];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.0742503124523101743;-2.2301560593317444336;-2.6625155734425320908;1.7356388160794951059;1.8891874044805021526;-1.9080250204203161868;2.1087252450037015095;-0.45489394347888212344;1.1537400785542504256;1.6105771519654061841;1.2493250732359379995;-2.156693181615268351;-0.68141884225024185184;-0.15353574283967250103;-1.7091463259889048132;0.081558103441453755345;-0.81584865870835876489;-0.30353023360424574717;-0.28178467266145534875;0.0096042255084005847404;0.079089777633455385364;0.22654939745357743908;-0.19438530881161095176;-0.17739486056949160808;0.35741488643401309044;1.4481701038119401126;-0.47905103068657811649;0.59309140973729379542;-1.000186682377986358;-0.27442073085510482189;0.012389125815512392823;1.2230603146816223514;0.6908060692781544665;-1.4485772727128394255;-0.99176119293926823239;1.3420986380026092011;2.2035026006951414779;1.5955960937975410818;-1.8542234532501744582;-1.5118490800378490135];
IW1_1 = [0.00019291718233048385078 -0.29437464914148042672 -0.33949811269028656868 1.3360010005824451973 -0.07572961888327993385 0.026692248218982025237;-0.00080065241339844048403 -0.28180649479697372772 -0.32483485075410567511 -0.80605053666966441916 -1.4672264670032477696 0.029769216186865919693;0.0012921400534778449808 0.4581304070120425509 0.52714059086629283524 1.6381507170532636497 -0.8892113320606993554 0.15980023983205757232;3.5266637877012770388e-05 -0.23533529538088435173 -0.27123083014265259028 1.1379521292344774164 0.15606002169503366273 0.034551930490451007727;-0.24515899455004439011 1.6196388945652342439 -1.0431784409946875947 0.85597904634151555925 -0.63809377454419202724 -0.17456608703871295818;-0.0084451041213246553357 -1.4007208876396208819 0.65226109793585607122 0.56913189260004826142 0.72251651696410212899 -0.79553451919672824033;-0.0031148043475784596007 0.020878035019985308196 0.0070263649857745845775 0.54100077617994080104 -1.0828505562036168097 1.2347169705845852938;-0.00010528730604866156219 -0.21336446472171588518 -0.2465032918980480936 0.18159965373470104977 1.2508653402502281082 0.3955066700691053927;0.00031274792431290479935 -0.24575332779069958278 -0.28274595595455970232 0.27262547667821196429 0.92908303680494086496 0.0053444024410329252911;0.00056513558441257402774 -0.24151945599335286619 -0.27817167714783086474 0.85653155757505849976 0.89469193583805417536 0.036042066514212621475;0.00097832597961397082913 -0.35931285792010370095 -0.41370643778472981911 0.80644153985327060585 -0.003356275190186366799 -0.53928241813854727038;0.0028134482317862669065 -0.0092621958564923639878 0.0047322039568939702411 -0.60675961357192942369 1.0931108598758714212 -1.2493734955419606436;-8.025147695447464155e-05 -0.15010232996980460429 -0.17301848193965158051 0.98325812540301915643 0.85291150375087876334 -0.007937932570978861388;0.00013116689658973173615 0.1954725288790549742 0.22518442459472956529 -0.93335308015908691193 0.86944572867421698881 0.020406413017579783098;6.9929031833512389428e-05 -0.54221288693457281305 -0.62414933023419361113 -2.274264680244618031 -0.030729867975630216492 -0.032325130975447625981;-6.7426289141348709575e-05 -0.1967036239173583223 -0.22651503349068480286 0.87988120554076576507 0.026234180114589118749 -0.0071588737592709304758;-0.00020592911271891960645 -0.43876736190823667494 -0.50589667191923948231 0.013843242630135478913 -0.009124825151472861634 0.0025691773584986506498;-0.00037828016991930458243 -0.27295862851884744593 -0.31371063635531687419 1.3033461146495584071 -0.01922129482837725209 0.14961973654695961966;-0.00027494354843486440345 0.052245280879424073339 0.060318376541133554569 0.095349704173274166252 0.85489958547322031368 -0.31285671636303458154;-0.45484952840018233466 1.011434195776789835 -0.28132986988730507294 0.36064650876270221147 0.31360873837212116522 -1.5502658035401455372;0.00061036025122546881758 0.18440174310297918758 0.21268686858322469191 -0.61542749776617844404 -0.86135504515841654349 -0.21975003839997059307;-0.00096721929489928084103 0.24444402628485428774 0.28152370686046207515 0.6481539630728956336 0.91833752632531528981 0.30396545352889475788;0.0006126203884524959991 -0.39273151318904381268 -5.2209444658599248957e-05 -0.00065985527140569510875 -0.0015555558502095469947 -0.00051087033494804821258;-0.00016533457553280484463 0.14399341796151249318 0.16709453647960634259 1.1706783148951791507 -0.102298995990106667 0.22926783331147837508;-0.00014504565959480399183 0.18690349377050233248 0.2154399551431862847 0.97434772739268626918 -0.91680442114922933161 -0.015788743870368569799;0.00013685522707709352804 0.51763251564695078599 0.59500363558864033386 -1.37641371397304213 1.4097083499286917618 -0.77492439371992949404;1.081564720441438712e-05 -0.36102793333955568444 -0.41623359764901191049 -1.6492177599931852061 -0.00011750328558300744057 0.015559687224405529746;0.00010086585995847470096 -0.13409511240115778996 -0.15432783003510935904 -1.0568952173629593272 -0.91894716730714498532 0.017859809801704370352;-2.7084822549075693212e-05 0.25355766730226564354 0.29263306743680694844 -0.075228417528170388184 1.0879611225206800018 -0.005602064879267433517;-6.0102749355200979866e-05 0.216624155970459642 0.24916407294651246596 0.068123439277034250616 -0.89449727067508599809 -0.055917521966810948553;-0.00044011142068985076824 -0.20206878004655007275 -0.23331320943359390441 0.68747774873335898427 0.86317079758374815057 -0.36577199775151603145;-0.0016792518746998276371 -0.40110182161897484088 -0.46473898367274896204 -0.90968645992422647595 -0.78341570220931988633 0.51429422969998017656;0.00010273240050096120338 -0.47343859632581197783 -0.54537235072051659657 -0.0091311189663415229939 -0.0045752510273031907553 0.0015216325137130920064;-0.00067757856042748596317 -0.94664736162160811883 -1.0924702878099490366 -0.036207630272115640113 0.15205521864576793112 -0.028097048806821504907;0.000593185370236698809 -0.23876101696662194174 -0.27665936035095184398 0.26068655768519999327 -0.93122988463862899078 -0.41711314889877215695;-0.00013650941472807725575 -0.36823673112812954633 -0.42350989924970866563 -1.7398999042615799215 0.02582035705472261744 -0.018872797445887566636;-0.015374969091056964535 0.79285984022762290291 -1.5859033389852910112 -0.56377164755956832298 -0.57639635821397661175 -0.73834051288200130969;-0.0033964728614082292414 -0.59457296248471347422 -0.69184061707915089912 -1.3332179817491154328 -0.51894280709498619153 0.66369595104734935287;-0.0013491792405119222738 -0.51602739207186820725 -0.59973035702140764514 0.06114710393599755156 1.3118990757881343612 -0.3572969579799199491;-0.00034189973744154397413 -0.16206348243274085186 -0.18600340637900250607 0.79207464198216992468 0.25945333352694444073 0.0041461019763388779272];

% Layer 2
b2 = [-1.2895064515873413402;0.10074878435682313449;0.20806331799587246545;-0.28714025305729928839;-0.60222649389521809571];
LW2_1 = [0.58377402321302873656 0.21483823840999191623 -0.099642727084516616309 1.128176417261553377 -7.9434677284558852478e-05 -0.000207237547745536951 -0.39955906751700576152 -0.068725200397910371497 0.60544440254691134218 -0.5233776723509411255 0.10651398063738370947 -0.40010502445401729954 -0.16037196004948173211 0.30883379165270380406 0.13074054546445704195 -0.86564980308971828382 -0.61856094741085687616 0.19123462125922507937 0.061912427511804035696 -0.00024169701766526882473 -0.18780865922826250891 0.082937168031104069321 -0.34204431361477011242 0.18808060556483569004 -0.25391368635451044833 -0.0081781874746062587639 0.36891763263292404185 0.21455358695516865697 -0.32633134718111944661 0.3961065701464084321 0.12143294059959303111 0.076942516790584489228 2.0010803200113604916 -0.34447391394754323102 0.088408835710750380277 -0.24414570386241499222 -1.4812647987333663185e-05 -0.044846634123821185747 0.13760615510558774077 0.94946690534699063058;0.70470423763748968327 0.25797561953088493647 -0.12082297604499549204 1.3604824106233237568 -0.00010194671372798318459 -0.00015485343106415300337 -0.50390994508695752252 -0.084891218392275410998 0.73010056664752887023 -0.63654669746554060072 0.12696594887537518415 -0.50446792671599027802 -0.19479408319806529315 0.37455360262952736017 0.15836464599839275569 -1.0688412141951297851 0.27051060786661407231 0.23554927439286979518 0.074895489076321250521 -0.00032362967881181142239 -0.22654176740851411642 0.10277639886897790844 -0.0012705606237669371961 0.22931957218506582308 -0.30867487917940727993 -0.0096172100782954943882 0.44941457525461209199 0.26099317065287985784 -0.39698137921166481989 0.47799128204639390605 0.14817161096050329716 0.094164331709816848082 0.80642042999929719471 -0.34078338848326361621 0.10836165555798078775 -0.29641258739015224899 -0.00019457248073616282571 -0.052535252048493755184 0.1670831984022618788 1.1522327442395081665;-1.5097863359492234014 0.35134389055191678208 -0.30879983204921052087 -2.1426069566689904811 0.00057963423579783469528 0.0001434964268014490374 -0.074874696701668450038 0.040905613619342327814 -0.12695982479378770114 0.97195104190574033165 -0.059880641906822761056 -0.066288006486390729788 0.97572195081052692789 -0.91234046610989649739 0.39260945931287427602 3.9627124283754575629 -1.0035578930103876694 -0.79905616904864795735 0.10388518496490195542 -4.4574706468839785372e-05 0.27231226723806750689 0.15768603560990196444 -0.0016402486939802811937 0.50889089534255249614 -0.77617026054570903426 0.023815547430946829716 1.0911749212233723405 0.8386696349107762849 0.10160282835992744122 0.058309294463514384221 -0.16145227379642523857 0.15324611494155093716 -0.80321547030854012483 0.043611975881076757433 -0.045140332932681506706 -0.70791655879071879731 -0.00093966312400241541053 -0.071702444193730258126 -0.027188044490200669739 -0.80887312762777241471;0.19230757896031985821 1.5138469131749150431 0.33643571503483438168 -0.74375560087779002405 3.6743326717674560563e-06 0.00055080553001179521737 0.18532072768741461588 0.5495078742026622276 -2.4314351885710561163 2.9090769554066868707 0.074908409086918772979 0.19184374982700752588 1.8262815937870362504 1.9767067999619736263 0.037664086268017892001 0.40463533568895870829 -0.84517627695295283186 0.060524154392409691694 1.3237220145621149126 0.00055657430809220929772 0.76224856327461554262 0.55209636929473360212 0.0010437100173118082306 -0.16644085361079818952 1.6610086672170363276 -0.058112652160466356233 -0.0012920953026774757971 1.6219733511924672165 -2.1243573104970923104 -2.4923647505509061162 -0.30983317947960381522 0.25463239194598696891 -0.67194654079821203307 0.07575621357336168038 0.42256598793132793546 0.0026011969518624305196 0.0005580386310254732609 -0.091748977710604071034 -0.29060848152612855921 -0.44784502842725804062;-0.49329263887736374272 -0.37321651299722147233 -0.61357666689420964357 -1.5190557138303335538 0.0022773392540196657312 0.0030508770262283367927 -0.22049117115469049621 1.4928416730040596772 -0.27459185891101201005 0.86827888122329344167 1.2594376870688801517 -0.24512937297552386817 -0.10173654266844228689 0.36448814584079863854 0.19212009644601360514 -0.7598052723464214786 -0.075753744263925670843 -1.4616146016504290017 -4.230639472945974866 0.0057103859527653051328 1.962218177181574541 1.5812585628249060665 0.019042176804478398028 1.5050400210104817322 0.23658056211723588191 0.26056159849974119824 -0.13122932912804496919 -0.12534387687353160112 -0.41534051845146752191 -1.2972960688835355469 1.5926819563136715985 -2.006220323566668462 0.13804594850153337204 0.055092614403613300589 1.8284319092266967388 -0.17053046575666491735 0.0018992042148702533572 0.97954001825676384474 0.92981160871614765284 -0.42262664453060211356];

% Output 1
y1_step2.ymin = -1;
y1_step2.gain = [2.63231620553235;3.2008844993576;7.73968245184249;16.4081197228869;42.0237515307898];
y1_step2.xoffset = [0.0357007535604889;-0.0671612383155339;-0.129499895967178;-0.0621919665815338;-0.0237434310701596];
y1_step1.xrows = 7;
y1_step1.keep = [2 3 4 5 6];
y1_step1.remove = [1 7];
y1_step1.constants = [0;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = removeconstantrows_apply(x1,x1_step1);
xp1 = mapminmax_apply(xp1,x1_step2);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step2);
y1 = removeconstantrows_reverse(y1,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end

% Remove Constants Output Reverse-Processing Function
function x = removeconstantrows_reverse(y,settings)
Q = size(y,2);
x = nan(settings.xrows,Q,'like',y);
x(settings.keep,:) = y;
x(settings.remove,:) = repmat(settings.constants,1,Q);
end
